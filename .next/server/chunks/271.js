exports.id=271,exports.ids=[271],exports.modules={19492:(a,b,c)=>{Promise.resolve().then(c.bind(c,39327)),Promise.resolve().then(c.bind(c,31217)),Promise.resolve().then(c.bind(c,54263)),Promise.resolve().then(c.bind(c,29515))},29705:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Asya_Danilova\\\\Desktop\\\\rs-react-course\\\\src\\\\components\\\\MainContainer\\\\MainContainer.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Asya_Danilova\\Desktop\\rs-react-course\\src\\components\\MainContainer\\MainContainer.tsx","default")},54263:(a,b,c)=>{"use strict";c.d(b,{default:()=>s});var d=c(60687),e=c(43210),f=c(16189),g=c(54864),h=c(35413);c(79090);let i=()=>{let a=(0,g.wA)(),b=(0,g.d4)(a=>a.search.searchTerm),[c,f]=(0,e.useState)(b);return(0,d.jsxs)("div",{className:"search",children:[(0,d.jsx)("div",{className:"search__input",children:(0,d.jsx)("input",{type:"text",value:c,onChange:a=>{f(a.target.value)},placeholder:"Enter your request...",className:"search-input"})}),(0,d.jsx)("div",{className:"search__button",children:(0,d.jsxs)("button",{className:"button",onClick:()=>{let b=c.toLowerCase().trim();localStorage.setItem("searchTerm",b),a((0,h.NM)(b)),window.dispatchEvent(new Event("searchTermUpdated"))},children:["Search ",(0,d.jsx)("i",{className:"bi bi-search"})]})})]})};var j=c(91054),k=c(77618);let l=({universities:a,id:b,handleCloseDetailsPage:c})=>{let e=(0,k.c3)();if(!a||0===a.length||!b)return(0,d.jsx)("p",{children:"No university data available"});let g=a.find(a=>a.domains.includes(b));return g||(0,f.notFound)(),(0,d.jsxs)("div",{className:"details-container",children:[(0,d.jsxs)("button",{onClick:c,className:"close-details",children:[(0,d.jsx)("i",{className:"bi bi-x-lg"})," ",e("detailsPage.close")]}),(0,d.jsx)("h2",{children:g.name}),(0,d.jsxs)("p",{children:[(0,d.jsxs)("strong",{children:[e("detailsPage.country"),":"]})," ",g.country]}),(0,d.jsxs)("p",{children:[(0,d.jsxs)("strong",{children:[e("detailsPage.domains"),":"]})," ",g.domains.join(", ")]}),(0,d.jsxs)("p",{children:[(0,d.jsxs)("strong",{children:[e("detailsPage.webSite"),":"]})," ",(0,d.jsx)("a",{href:g.web_pages[0],target:"_blank",rel:"noreferrer",children:g.web_pages[0]})]})]})};c(83667);var m=c(29515),n=c(30474);async function o(a,b="GET",c){let d={method:b,headers:{Accept:"application/json"}};c&&["POST","PUT","PATCH"].includes(b)&&(d.body=JSON.stringify(c));try{let b=await fetch(`https://react-app-danilovaasya.netlify.app/api${a}`,d);if(!b.ok){let a=await b.text();throw console.error(`API request failed: ${b.status} - ${a}`),Error(`API request failed: ${b.status} - ${a}`)}return await b.json()}catch(b){throw console.error(`Error API request ${a}:`,b),b}}async function p(){try{return await o("/search?&offset=1&limit=9")}catch(a){throw console.error("Error fetching universities",a),a}}async function q(a){let b=`/search?&country=${a}`;try{return await o(b)}catch(b){throw console.log(`Error fetching universities for ${a}:`,b),b}}let r=({currentPage:a,showDetails:b})=>{let c=(0,k.c3)(),[i,o]=function(a,b=""){let[c,d]=(0,e.useState)(()=>{try{return localStorage.getItem(a)??b}catch(a){return console.error(a),b}});return[c,b=>{try{d(b),localStorage.setItem(a,b)}catch(a){console.error(a)}}]}("searchTerm",""),r=(0,f.useRouter)(),s=(0,g.wA)(),t=(0,f.useParams)(),u="string"==typeof t?.id?t.id:void 0,[v,w]=(0,e.useState)(!0),[x,y]=(0,e.useState)(null),z=(0,g.d4)(a=>a.selectedItems.items),[A,B]=(0,e.useState)(0),[C,D]=(0,e.useState)([]),[E,F]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{w(!0);try{let a;a=i.trim()?await q(i.trim()):await p(),D(a),y(null)}catch(a){y(a instanceof Error?a.message:"Unknown error")}finally{w(!1)}})()},[A,i]),(0,e.useEffect)(()=>{let a=()=>{let a=localStorage.getItem("searchTerm")||"";o(a),s((0,h.NM)(a)),B(a=>a+1)};return window.addEventListener("searchTermUpdated",a),()=>window.removeEventListener("searchTermUpdated",a)},[s,o]);let G=t&&"string"==typeof t.locale?t.locale:"en",H=C.slice((a-1)*m.M5,a*m.M5),I=async a=>{try{let b=await fetch("/api/generate-csv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:a})});if(!b.ok)throw Error("Failed to generate CSV");let c=await b.blob(),d=(b.headers.get("Content-Disposition")||"").match(/filename="(.+)"/),e=d?d[1]:"download.csv",f=URL.createObjectURL(c),g=document.createElement("a");g.href=f,g.download=e,document.body.appendChild(g),g.click(),g.remove(),setTimeout(()=>URL.revokeObjectURL(f),100)}catch(a){console.error("Error downloading CSV:",a),alert("Failed to download CSV. Please try again!")}};return v||E?(0,d.jsx)("div",{className:"loader-container",children:(0,d.jsx)("p",{className:"loader-message",children:c("results.loading",{defaultValue:"Loading universities, please wait..."})})}):(0,d.jsxs)("div",{className:"results-container",children:[(0,d.jsx)("button",{className:"refresh-button",onClick:()=>{F(!0),setTimeout(()=>F(!1),1e3),B(a=>a+1)},style:{marginLeft:"1rem"},children:(0,d.jsx)("i",{className:"bi bi-arrow-clockwise"})}),(0,d.jsxs)("div",{className:"before-pagination",children:[(0,d.jsx)("div",{className:"master-container",children:x?(0,d.jsx)("p",{className:"error-message",children:String(x)}):Array.isArray(H)&&0!==H.length?H.map(b=>{let e=z.some(a=>a.domains[0]===b.domains[0]);return(0,d.jsxs)("div",{className:"university-card",style:{cursor:"pointer"},onClick:c=>{!c.target.closest(".select-checkbox")&&r.push(`/${G}/${a}/${b.domains[0]}`)},children:[(0,d.jsx)("input",{type:"checkbox",className:"select-checkbox",checked:e,onClick:a=>a.stopPropagation(),onChange:a=>{a.target.checked?s((0,j.mL)(b)):s((0,j.lG)(b.domains[0]))}}),(0,d.jsx)("h3",{children:b.name}),(0,d.jsxs)("p",{children:[(0,d.jsxs)("strong",{children:[c("detailsPage.country"),":"]})," ",b.country]}),(0,d.jsxs)("p",{children:[(0,d.jsxs)("strong",{children:[c("detailsPage.webSite"),":"]})," ",(0,d.jsx)("a",{href:b.web_pages[0],target:"_blank",rel:"noreferrer",children:b.web_pages[0]||c("detailsPage.noWebSite")})]})]},b.domains[0])}):(0,d.jsxs)("div",{className:"error-container",children:[(0,d.jsx)(n.default,{src:"/no-data.png",alt:"No data",width:128,height:128}),(0,d.jsx)("p",{className:"error-message",children:c("results.noData",{defaultValue:"No universities available to display."})})]})}),u&&b&&C.length>0&&(0,d.jsx)("div",{className:"details-panel",children:(0,d.jsx)(l,{universities:C,id:u,handleCloseDetailsPage:()=>{r.push(`/${G}/${a}`)}})})]}),(0,d.jsxs)("div",{className:"pagination-container",children:[(0,d.jsx)("button",{className:"previous-button",onClick:()=>{a>1&&r.push(`/${G}/${a-1}`)},disabled:1===a,children:c("results.previous")}),(0,d.jsxs)("span",{className:"pagination-info",children:[a||0," ",c("results.page")," ",c("results.of")," ",Math.ceil(C.length/m.M5)]}),(0,d.jsx)("button",{className:"next-button",onClick:()=>{a<Math.ceil(C.length/m.M5)&&r.push(`/${G}/${a+1}`)},disabled:a>=Math.ceil(C.length/m.M5),children:c("results.next")})]}),z.length>0&&(0,d.jsxs)("div",{className:"flyout",children:[(0,d.jsxs)("span",{children:[z.length," ",c("results.selectedItems")]}),(0,d.jsx)("button",{onClick:()=>s((0,j.JS)()),children:c("results.unselectAll")}),(0,d.jsx)("button",{onClick:()=>I(z),children:c("results.downloadCsv")})]})]})};c(60810);let s=()=>{let a=(0,k.c3)(),b=(0,f.useParams)(),c=parseInt(b?.page||"1",10),j=!!b?.id,l=(0,g.wA)(),m=(0,g.d4)(a=>a.search.searchTerm);return((0,e.useEffect)(()=>{if(!m){let a=localStorage.getItem("searchTerm")||"";l((0,h.NM)(a))}},[l,m]),isNaN(c)||c<1)?(0,f.notFound)():(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"main-container",children:[(0,d.jsx)("p",{className:"app-description",children:a("mainPage.description")}),(0,d.jsx)(n.default,{src:"/graduation.png",alt:"graduation",width:700,height:250})]}),(0,d.jsx)(i,{}),(0,d.jsx)(r,{currentPage:c,showDetails:j})]})}},60810:()=>{},79090:()=>{},83667:()=>{},95524:(a,b,c)=>{Promise.resolve().then(c.bind(c,77325)),Promise.resolve().then(c.bind(c,89641)),Promise.resolve().then(c.bind(c,29705)),Promise.resolve().then(c.bind(c,25528))}};